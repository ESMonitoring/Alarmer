const names=[],codes=[];let alarm_text,selected_site_name=[],ES_site=[],codeNOES=[];$.getJSON("data.json",function(e){for(let t=0;t<Object.keys(e).length;t++)names[t]=e[t].name,codes[t]=e[t].code}),$(function(){$("#alarminput").autocomplete({source:["Ac Fail","قطعی سایت","ریست سایت","Ac Fail - Module Fail","Module Fail","Module Fail>2","Ac Fail - Module Fail - Module Fail>2","RF Unit Maintenance Link Failure","High Temperature","NE Is Disconnected","Power supply DC Output Out Of Range","Low Battery","Door Open","Battery Low Voltage","ریست GSM","ریست LTE","Cell Logical Channel Failure","VSWR - BAND:BBBB - SECTOR:Y - MAIN/DIVER - Value: X.Y"]}),$("#rep_to").autocomplete({source:["آقای کاوه","آقای شاهمرادی","خانم خدابخشیان","آقای نیری","آقای یزدانپرست","آقای زیباکلام","آقای مصری پور","آقای سرائیان","آقای عرب","آقای قربانی","آقای نصیری","آقای جنگروی","آقای هدایتی","آقای فریدونی","آقای خوانساری","آقای علیزاده","آقای ایزدی"]}),$("#more").autocomplete({source:["قطعی برق منطقه","PM-SITE","در حال پیگیری","ناپایداری لینک انتقال","اعزام کارشناس","CR#Number - موضوع - از ساعت XX الی YY - انجام دهنده: XXXX"]})});const copyToClipboard=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),console.log("Done")};function name_searcher(e,t,o){for(let n=0;n<e.length;n++)for(let l=0;l<o.length;l++)e[n]==o[l]?selected_site_name[n]=t[l]:selected_site_name[n]||(selected_site_name[n]="کد سایت اشتباه/ناموجود⭐")}function text_maker(){let e=(new Date).toLocaleDateString("fa-IR").replace(/([۰-۹])/g,e=>String.fromCharCode(e.charCodeAt(0)-1728));seperator=e.split("/"),e=`${seperator[0]}/${seperator[1].padStart(2,"0")}/${seperator[2].padStart(2,"0")}`;let t="";site_list=`${function(){for(let e=0;e<selected_site_name.length;e++)t+=`${selected_site_name[e]} - ${codeNOES[e]}\n`;return t}()}`,alarm_name=document.getElementById("alarminput").value,info_list=`${more_inf?`شرح: ${more_inf}\n`:""}`,reportedto=`${reportedto?`گزارش به ${reportedto}\n`:""}`,siteha=`${codeNOES.length<2?"سایت: ":"سایت های:\n"}`,IsMonitorong=`${!1===document.getElementById("fixed_monitoring").checked?"":"مانیتورینگ: "}`,codesite.trim()||(site_list="کدسایتی وارد نشده است !🤐\n"),alarm_text=`${e}\n${siteha}${site_list}آلارم: ${alarm_name}\nزمان: ${alarmtime}\n${info_list}${reportedto}${IsMonitorong}${monitoring}`,copyToClipboard(alarm_text),document.getElementById("pre_modal").textContent=alarm_text,document.getElementById("copybutton").textContent="کپی!",$("#myModal").modal(),selected_site_name.length=0,ES_site.length=0}document.getElementById("clear").addEventListener("click",function(){document.getElementById("site_code").value="",document.getElementById("alarminput").value="",document.getElementById("timesel").value="",document.getElementById("more").value="",document.getElementById("rep_to").value=""}),document.getElementById("preview").addEventListener("click",function(){alarmtime=document.getElementById("timesel").value,codesite=document.getElementById("site_code").value,reportedto=document.getElementById("rep_to").value,monitoring=document.getElementById("monitoring").value,more_inf=document.getElementById("more").value,codeNOES=codesite.trim().split(/\s+/),name_searcher(ES_site=codeNOES.map(e=>`ES${e}`),names,codes),text_maker()}),$(".selector").tooltip({position:{my:"left+10 center",at:"left center"}}),document.getElementById("copybutton").addEventListener("click",function(){document.getElementById("copybutton").textContent="کپی شد!"});